<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/pagina_inicial.css">

    <script src="../js/funcoes.js"></script>
    <title>Pagina Inicial</title>
</head>

<body onload="validarSessao(), atualizacaoPeriodica()">

    <!-- INICIO DA HEADER -->
    <header class="site-header">
        <div class="wrapper site-header__wrapper">
            <span href="#" class="brand">Bem Vindo(a) <span id="b_usuario">usuário</span></span>
            <a href="#tips" style="align-items: flex-end;font-weight: bold; font-size: 20px;"><img src="" style="width: 30px; display: flex; align-items: center;">Favorito</a>
            <a href="#tips2" style="align-items: flex-end;font-weight: bold; font-size: 20px;"><img src="" style="width: 30px; display: flex; align-items: center;">Mural Animes</a>
            <!-- Utilize esta Id com # no link para ir até este local -->
            <div class="button button--icon" aria-label="Sign in">
                <img src="../assets/sair.png" alt="" style="width: 30px; display: flex; align-items: center"
                    onclick="limparSessao()">
            </div>
        </div>
    </header>
    <!-- FIM DA HEADER -->

    <!-- BANNER -->
    <div id="top-section-main">
        <div id="top-section-content"></div>
    </div>
    <!-- BANNER -->


    <!--INICIO MEUS PRINCIPAIS VALORES -->
    <!-- INICIO CARDS VALORES PERSONAGENS -->
    <div id="feature-section">
        <h1 class="feature-section-title">Animes.values() foi criado para demonstrar que podemos aprender lições para
            toda uma vida assistindo animes. Pois os animes que mais fazem sucesso são aqueles que estão recheados de
            <span style="background-color: #e8670f; color: #ffffff; padding: 2px; border-radius: 8px;">Bons
                Valores</span> e <span
                style="background-color: #e8670f; color: #ffffff; padding: 2px; border-radius: 8px;">lições de
                vida.</span><br>
            <p></p><span style="text-decoration: underline coral;">Alguns bons exemplos:</span>
        </h1>
        <div class="feature-content">
            <div class="col-3">
                <span style="text-decoration: underline; font-size: xx-large;">Persistência</span>
                <img style="width: 100%; border-radius: 8px; padding-top: 10px" src="../assets/card1.jpg">
                <h3>Rock Lee (Naruto)</h3>
                <p>"A lição de vida que podemos aprender com o Rock Lee é que aquele que trabalha duro pode superar um
                    gênio, mas, de nada adianta trabalho duro se você não confia em você mesmo. Mesmo sem ser
                    considerado um gênio ele provou que nada é impossível se nós tivermos dedicação, disciplina e amor
                    pelo que fazemos"</p>
            </div>
            <div class="col-3">
                <span style="text-decoration: underline; font-size: xx-large;">Resiliência</span>
                <img style="width: 100%; ; border-radius: 8px; padding-top: 10px" src="../assets/card2.jpg">
                <h3>Ash Ketchum (Pokémon)</h3>
                <p>"A lição que o Ash pode nos ensinar e de nunca desistir dos seus sonhos não importa quantas vezes
                    você falhe, o sonho dele era se tornar campeão mundial e diversas vezes ele chegou a disputar a
                    final, mas sempre passava muito perto, e por mais que ele tenha desanimado em alguns momentos ele
                    nunca desistiu. Conquistando o tão sonhado titulo de Campeão Mundial após a 7.º final que ele
                    disputou."</p>
            </div>
            <div class="col-3">
                <span style="text-decoration: underline; font-size: xx-large;">Iniciativa</span>
                <img style="width: 100%; border-radius: 8px; padding-top: 10px" src="../assets/card3.jpg">
                <h3>Monkey D. Luffy (One Piece)</h3>
                <p>"A lição que podemos aprender com o Luffy é de que se você tiver um sonho de conquistar alguma coisa,
                    apenas comece, não espere ter as melhores condições e nem os melhores aparelhos. Faça como o Luffy
                    que saiu ao mar com o sonho de se tornar o Rei dos piratas, mas começou sem ter uma tripulação e nem
                    mesmo um navio, ele começou navegando em um barril de uísque."</p>
            </div>
        </div>
    </div><br>
    <!-- FIM CARDS VALORES PERSONAGENS-->

    <!-- INICIO BANNERS VALORES ANIMES-->
    <div id="showcase1-container">
        <div class="showcase">
            <div class="col-2">
                <img class="showcase1pic" src="../assets/banner1.jpg">
            </div>
            <div class="col-2">
                <div class="feature-text">
                    <h1 class="section-title">Trabalho em Equipe</h1>
                    <p class="section-left">"Qualquer pessoa de sucesso sabe que é uma peça importante.<br>
                        Mas sabe que não conseguirá nada sozinho."<br><br>
                        Os animes mostram que o trabalho em equipe é importante, porque muitas vezes não somos capazes
                        de fazer tudo sozinhos, por mais fortes que podemos ser afinal, o ser humano não é como o
                        Superman, não somos invencíveis ou invulneráveis. <br><br>
                        O anime que mostra com mais evidência isso é o Naruto (mostrando que todos os membros da equipe
                        têm
                        sua importância, e são essenciais para o sucesso da missão).
                    </p>
                </div>
            </div>
        </div>
        <br>
    </div>

    <div id="showcase2-container">
        <div class="showcase">
            <div class="col-2">
                <div class="feature-text2">
                    <h1 class="section-title">Respeito aos Mestres</h1>
                    <p class="section-left">
                        "Vejo como os animes como Naruto, Saint Saiya e Dragon Ball mostram o grande respeito que os
                        alunos tem por seus professores. <br><br>
                        Pois são eles que passam valiosas lições para que amadureçam e se tornem mais fortes e capazes
                        de realizar grandes feitos. <br><br>
                        Nos animes vemos uma relação bonita se formar entre aluno e professor, a tal ponto que os
                        professores sempre acabam se sacrificando e ajudando seus pupilos, a quem consideram como
                        filhos. <br><br>
                        Sendo esse um dos meus valores mais importantes, pois se eu estou aqui hoje foi por conta de
                        vocês e de todos os meus professores que tive até hoje".
                    </p>
                </div>
            </div>
            <div class="col-2">
                <img class="showcase1pic" src="../assets/banner2.jpg">
            </div>
        </div>
    </div>
    <!-- FIM BANNERS VALORES ANIMES-->

    <!-- INICIO FAVORIO -->
    <div id="tips" style="transition: all .4s;"><br><br>
        <div id="call-to-action2">
            <div id="showcase3-container">
                <div class="showcase">
                    <div class="col-4">
                        <div class="feature-text3" style="display: flex; flex-direction: column; align-items: center;">
                            <h1 class="section-title2">Dos valores acima <br>
                                Qual você mais se identificou?<br>
                            </h1>
                            <button onclick="cadastrarFavorito()">CADASTRAR</button><br>
                            <select name="" id="sel_favorito" class="select">
                                <option value="">Escolha o seu favorito</option>
                                <option value="Persistência">Persistência</option>
                                <option value="Resiliência">Resiliência</option>
                                <option value="Iniciativa">Iniciativa</option>
                                <option value="Trabalho em Equipe">Trabalho em Equipe</option>
                                <option value="Respeito aos Mestres">Respeito aos Mestres</option>
                            </select><br>
                            <div class="card_erro" id="cardErro"
                                style="background-color:#0D63E3;  border-top-left-radius: 20px;border-top-right-radius: 20px;border-bottom-left-radius: 20px;border-bottom-right-radius: 20px;width: 500px;height: 100px;display: none; padding-top: 20px;">
                                <span id="mensagem_erro"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </a>
        <!-- FIM FAVORIO -->

        <!-- INICIO MURAL DE VALORES -->
        <div id="tips2" style="transition: all .4s;"><br>
            <div id="call-to-action">
                <div class="showcase">
                    <div class="col-1">
                        <h1 class="action-title" style="font-family: 'Times New Roman', Times, serif">Você já aprendeu
                            algum
                            valor com animes?</h1>
                        <p style="font-size: xx-large;">Conte-nos qual foi o anime e o que ele te ensinou!</p>
                        <p style="text-align: center;"><a href="./mural.html" class="signupBTN">Cadastrar</a></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- FIM MURAL DE VALORES -->

        <!-- INICIO FOOTER -->
        <footer>
            <a href="https://github.com/LucasSilvvaLLima/Projeto-Individual-SPtech" target="_blank">
                <div class="social-footer">
                    <div class="center">
                        <img src="../assets/github.png" alt="gitHub" height="52" width="52">
                    </div>
                </div>
            </a>

            <a href="https://www.linkedin.com/in/lucas-analistasistemas/" target="_blank" rel="noopener noreferrer">
                <div class="social-footer">
                    <div class="center">
                        <img src="../assets/facebook.png" alt="facebook" height="52" width="52">
                    </div>
                </div>
            </a>

            <a href="https://www.instagram.com/luckas_sillva_lima/" target="_blank" rel="noopener noreferrer">
                <div class="social-footer">
                    <div class="center">
                        <img src="../assets/instagram.png" alt="instagram" height="52" width="52">
                    </div>
                </div>
            </a>

            <h3 style="text-align: center; padding-top: 500px; color: rgb(255, 255, 255); font-size: 25px;">
                Anime.values()
            </h3>
            <span class="copyright">&copy; Copyright 2022 - Feito por &hearts; Lucas Silva Lima</span>
        </footer>
        <!-- FIM FOOTER -->

</body>

</html>

<script>
    // aguardar();

    var idUsuarioFavorito = JSON.parse(localStorage.getItem('idUsuarioFavorito')) || []
    idUsuario = sessionStorage.ID_USUARIO;

    idUsuarioFavorito.push(idUsuario)

    var index = idUsuarioFavorito.indexOf(idUsuario)
    var existeUserLocalStorage = idUsuarioFavorito[idUsuarioFavorito.indexOf(idUsuario)] >= 0

    var contador
    if (idUsuarioFavorito[0] != idUsuario) {
        idUsuarioFavorito.splice(0, 1)
    }
    function cadastrarFavorito() {
        if (idUsuarioFavorito[1] != idUsuario) {
            localStorage.setItem('idUsuarioFavorito', JSON.stringify(idUsuarioFavorito))
            //Recupere o valor da nova input pelo nome do id
            // Agora vá para o método fetch logo abaixo


            var favorito = sel_favorito.value;

            if (favorito == "") {
                cardErro.style.display = "block"
                mensagem_erro.innerHTML = " SELECIONE O SEU FAVORITO ";

                setInterval(sumirMensagem, 5000)
                finalizarAguardar();
                return false;
            }
            else {
                setInterval(sumirMensagem, 5000)
            }

            // Enviando o valor da nova input
            fetch(`/usuarios/cadastrarFavorito/${idUsuario}`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    // crie um atributo que recebe o valor recuperado aqui
                    // Agora vá para o arquivo routes/usuario.js
                    favoritoServer: favorito
                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    cardErro.style.display = "block";
                    mensagem_erro.innerHTML = "CADASTRO REALIZADO COM SUCESSO ";

                    setTimeout(function () {
                        window.location = "pagina_inicial.html";
                    }, "3500");

                    limparFormulario();
                    finalizarAguardar();
                } else {
                    throw ("Houve um erro ao tentar realizar o cadastro!");
                    cardErro.style.display = "block"
                    mensagem_erro.innerHTML = " PREENCHA TODOS OS CAMPOS ";
                    setInterval(sumirMensagem, 5000)
                    finalizarAguardar();
                }
            }).catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
                finalizarAguardar();
            });

            return false;

        } else {
            cardErro.style.display = "block";
            mensagem_erro.innerHTML = "SÓ É POSSIVEL ESCOLHER UM FAVORITO ";
            setInterval(sumirMensagem, 6000)
            limparFormulario();
            finalizarAguardar();
        }

    }
    function sumirMensagem() {
        cardErro.style.display = "none"
    }

</script>